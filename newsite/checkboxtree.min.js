webpackJsonp([22],{712:function(e,exports,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=n(713),i=o(t);n(349);var l=n(718),c=o(l);exports.default=angular.module("democheckboxtree",["ui.tree",c.default.name]).component("democheckboxtree",i.default)},713:function(e,exports,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=n(714),i=o(t),l=n(715),c=o(l);n(716),exports.default={restrict:"E",bindings:{},template:i.default,controller:c.default,controllerAs:"vm"}},714:function(e,exports){e.exports='<section class="intro-content">\n\t<h1>树</h1>\n\t<p>支持checkbox，配置的树组件</p>\n</section>\n\n<section class="intro-content">\n\t<h2>安装</h2>\n\t<p>安装fancyui</p>\n</section>\n<div ng-repeat="node in vm.list">\n\t{{node}}\n</div>\n<div class="example-block">\n\t<div class="highlight" hljs hljs-language="bash">\nnpm install fancyui --save\nnpm install angular-ui-tree --save</div>\n</div>\n\n<section class="intro-content">\n\t<h2>注入模块</h2>\n\t<p>注入fancyui的checkboxTree模块</p>\n</section>\n\n<div class="example-block no-border">\n\t<div class="highlight" hljs hljs-language="javascript">\nimport checkboxtreeComponent from \'./checkboxtree.component\';\nimport \'angular-ui-tree\';\nimport {checkboxtree} from \'fancyui\';\nexport default angular.module(\'checkboxtree\', [\n  \'ui.tree\',\n  checkboxtree.name\n])\n.component(\'checkboxtree\', checkboxtreeComponent);</div>\n</div>\n\n<h2>示例</h2>\n<div class="example-block">\n\t<div class="bs-example pop-confirm-example">\n\t\t<bp-checkboxtree \n\t\t\tlist-promise="vm.loadPromise" \n\t\t\tng-model="vm.form.category"\n\t\t\tconfig="vm.config"></bp-checkboxtree>\n\t</div>\n</div>\n\n<h2>组件使用</h2>\n<h3>view代码</h3>\n<div class="example-block no-border">\n<div class="highlight" hljs hljs-no-escape>\n&lt;bp-checkboxtree \n  list-promise="vm.loadPromise" \n  ng-model="vm.form.category"\n  config="vm.config"&gt;\n&lt;/bp-checkboxtree&gt;\n</div>\n</div>\n\n<h3>controller代码</h3>\n<div class="example-block no-border">\n<div class="highlight" hljs hljs-language="javascript">\n/**演示mock 数据 */\nthis.loadPromise = this.mockService().mock([{\n    name: \'第一个节点\',\n    categoryId: 1001,\n    child: [{\n      name: \'第一个节点的子节点\',\n      categoryId: 1001001\n  },{\n      name:\'第一个节点的子节点2\',\n      categoryId: 1001002\n\t}]\n  },\n  {\n    name: \'第二个节点(没有子节点)\',\n    categoryId: 1002\n  }]);\n\n//这个配置用于避免或减少数据转换\nthis.config = {\n  //指示子节点的字段名\n  fieldOfChildren: \'child\',\n  //指示节点名的字段\n  fieldOfName: \'name\',\n  //指示节点id的字段\n  fieldOfId: \'categoryId\'\n};\n\nthis.form = {};\n/**发送给服务端的数据，以及数据回填操作 */\nthis.form.category = [\n{\n  name: \'第二个节点(没有子节点)\',\n  categoryId: 1002\n}];\n</div>\n</div>\n'},715:function(e,exports){"use strict";function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}(),t=function(){function e(o){"ngInject";n(this,e),this.$q=o,this.loadPromise=this.mockService().mock([{name:"第一个节点",categoryId:1001,child:[{name:"第一个节点的子节点",categoryId:1001001},{name:"第一个节点的子节点2",categoryId:1001002}]},{name:"第二个节点(没有子节点)",categoryId:1002}]),this.config={fieldOfChildren:"child",fieldOfName:"name",fieldOfId:"categoryId"},this.form={},this.form.category=[{name:"第二个节点(没有子节点)",categoryId:1002}]}return e.$inject=["$q"],o(e,[{key:"mockService",value:function(){var e=this;return{mock:function(n){var o=e.$q.defer();return o.resolve(n),o.promise}}}}]),e}();exports.default=t},716:function(e,exports,n){var o=n(717);"string"==typeof o&&(o=[[e.id,o,""]]);n(100)(o,{});o.locals&&(e.exports=o.locals)},717:function(e,exports,n){exports=e.exports=n(94)(),exports.push([e.id,"",""])},718:function(e,exports,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=n(719),i=o(t),l=angular.module("checkboxtree",[]).component("bpCheckboxtree",i.default);exports.default=l},719:function(e,exports,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=n(720),i=o(t),l=n(721),c=o(l);n(723);var r={restrict:"E",bindings:{listPromise:"=",ngDisabled:"=",ngModel:"=",config:"<"},template:i.default,controller:c.default,controllerAs:"vm"};exports.default=r},720:function(e,exports){e.exports='<div ui-tree id="tree-root" data-nodrop-enabled="true" data-drag-enabled="false">\n  <ol ui-tree-nodes ng-model="vm.list" class="ui-tree-ol">\n    <li ng-repeat="node in vm.list" ui-tree-node ng-include="\'goods_nodes_renderer.html\'" collapsed="true"></li>\n  </ol>\n</div>\n<script type="text/ng-template" id="goods_nodes_renderer.html">\n  <div ui-tree-handle class="tree-node tree-node-content">\n    <a class="toggle-btn" ng-if="node[vm.config.fieldOfChildren] && node[vm.config.fieldOfChildren].length > 0" data-nodrag ng-click="toggle(this)">\n      <span class="glyphicon"\n            ng-class="{\n          \'glyphicon-chevron-right\': collapsed,\n          \'glyphicon-chevron-down\': !collapsed\n        }"></span>\n    </a>\n    <label class="goods-node">\n      <input type="checkbox"\n             ng-model="node.checked"\n             ng-click="vm.nodeClickHandler(node)"\n             ng-disabled="vm.ngDisabled"/>\n      <span class="glyphicon goods-node-icon"\n            ng-class="{\n          \'glyphicon-folder-open\': node[vm.config.fieldOfChildren] && !collapsed,\n          \'glyphicon-folder-close\': node[vm.config.fieldOfChildren] && collapsed,\n          \'glyphicon-file\': !node[vm.config.fieldOfChildren]\n        }"></span>\n      {{node[vm.config.fieldOfName] || "地级市地方"}}\n    </label>\n  </div>\n  <ol ui-tree-nodes="" ng-model="node[vm.config.fieldOfChildren]" ng-class="{hidden: collapsed}">\n    <li ng-repeat="node in node[vm.config.fieldOfChildren]" ui-tree-node ng-include="\'goods_nodes_renderer.html\'" collapsed="true">\n    </li>\n  </ol>\n</script>\n'},721:function(e,exports,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}(),c=n(722),r=o(c),d=function(){function e(){var n=this;t(this,e),this.name="checkboxtree",this.config=Object.assign({},r.default,this.config),this.listPromise.then(function(e){n.list=e,n.formatList(n.list,n.ngModel)}),this.ngModel?"":this.ngModel=[]}return l(e,[{key:"nodeClickHandler",value:function(e){e[this.config.fieldOfChildren]?(this.toggleUpNode(e),this.toggleDownNode(e)):this.toggleUpNode(e),this.updateModel(e)}},{key:"toggleUpNode",value:function(e){var n=!0,o=this.getSiblings(e);if(o&&o&&o.forEach(function(e){e.checked||(n=!1)}),n&&e.parent){var t=this.getNode(e.parent,this.list);t.checked=e.checked,this.updateModel(t),this.toggleUpNode(t)}}},{key:"toggleDownNode",value:function(e){var n=this;e[this.config.fieldOfChildren]&&e[this.config.fieldOfChildren].forEach(function(o){o.checked=e.checked,n.updateModel(o),n.toggleDownNode(o)})}},{key:"updateModel",value:function(e){var n=this;if(e.checked)this.ngModel.push(e);else{var o=void 0;this.ngModel.forEach(function(t,i){if(t[n.config.fieldOfId]==e[n.config.fieldOfId])return void(o=i)}),this.ngModel.splice(o,1)}this.ngModel=angular.copy(this.ngModel)}},{key:"formatList",value:function(e,n){var o=this;n.forEach(function(n){var t=o.getNode(n[o.config.fieldOfId],e);t&&(t.checked=!0)})}},{key:"getSiblings",value:function(e){var n=this;if(e.parent){var o=function(){var o=n.getNode(e.parent,n.list),t=angular.copy(o[n.config.fieldOfChildren]);return t.forEach(function(o,i){o[n.config.fieldOfId]==e[n.config.fieldOfId]&&t.splice(i,1)}),{v:t}}();if("object"===("undefined"==typeof o?"undefined":i(o)))return o.v}}},{key:"getNode",value:function(e,n){var o=this,t=void 0,i=function e(n,i){i.forEach(function(i){return i[o.config.fieldOfId]==n?(t=i,!1):void(i[o.config.fieldOfChildren]&&e(n,i[o.config.fieldOfChildren]))})};return i(e,n),t}}]),e}();exports.default=d},722:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={fieldOfChildren:"children",fieldOfName:"categoryName",fieldOfId:"categoryId"};exports.default=n},723:function(e,exports,n){var o=n(724);"string"==typeof o&&(o=[[e.id,o,""]]);n(100)(o,{});o.locals&&(e.exports=o.locals)},724:function(e,exports,n){exports=e.exports=n(94)(),exports.push([e.id,".checkboxtree{color:red}#tree-root ol{list-style:none}",""])}});
//# sourceMappingURL=checkboxtree.min.js.map